<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/index.css') }}">
    <title>SafeRoute</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
         integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
         crossorigin=""/>
</head>
<body>
    <div id="top-navbar">
        <button class="nav-button active" data-panel="events">
            <span class="nav-icon">‚ò∞</span>
            <span class="nav-label">–ü–æ–¥—ñ—ó</span>
        </button>
        <button class="nav-button" data-panel="settings">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span class="nav-label">–ü–∞—Ä–∞–º–µ—Ç—Ä–∏</span>
        </button>
        <button class="nav-button" data-panel="developer">
            <span class="nav-icon">üõ†Ô∏è</span>
            <span class="nav-label">–†–æ–∑—Ä–æ–±–Ω–∏–∫</span>
        </button>
        <button class="nav-button" data-panel="changes">
            <span class="nav-icon">üìú</span>
            <span class="nav-label">–ó–º—ñ–Ω–∏</span>
        </button>
    </div>

    <div id="side-panel">
        <div class="panel-header">
            <h1 id="panel-title">–ü–æ–¥—ñ—ó</h1>
            <button class="close-button" id="close-panel">‚úï</button>
        </div>

        <div class="panel-content active" id="events-content">
            <div class="events-list">

            </div>
        </div>

        <div class="panel-content" id="settings-content">
            <div class="settings-content">
                <div class="setting-group">
                    <h3>–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h3>
                    <div class="setting-item">
                        <span class="setting-label">–ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –º—ñ—Ç–∫–∏ –Ω–∞ –∫–∞—Ä—Ç—ñ</span>
                        <div class="toggle-switch active" data-setting="markers"></div>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">–ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∑–æ–Ω–∏ –Ω–∞ –∫–∞—Ä—Ç—ñ</span>
                        <div class="toggle-switch active" data-setting="polygon"></div>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">–¢–µ–º–Ω–∞ —Ç–µ–º–∞</span>
                        <div class="toggle-switch" data-setting="dark-mode"></div>
                    </div>
                    <div class="setting-item">
                        <button class="form-button secondary" id="load-map-btn" style="width: 100%;">
                            üìÇ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∫–∞—Ä—Ç—É
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="panel-content" id="developer-content">
            <div class="settings-content">
                <div class="setting-group">
                    <h3>–ö–µ—Ä—É–≤–∞–Ω–Ω—è –∫–∞—Ä—Ç–æ—é</h3>
                    <div class="setting-item">
                        <button class="form-button primary" id="save-map-btn" style="width: 100%;">
                            üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –≤—Å—ñ –∑–º—ñ–Ω–∏
                        </button>
                    </div>
                </div>
                <div class="setting-group">
                    <h3>–ú—ñ—Ç–∫–∏</h3>
                    <div id="markers-list"></div>
                </div>
                <div class="setting-group">
                    <h3>–ü–æ–ª—ñ–≥–æ–Ω–∏</h3>
                    <div id="polygons-list"></div>
                </div>
            </div>
        </div>

        <div class="panel-content" id="changes-content">
            <div class="changes-content">
                <div class="setting-group">
                    <h3>–Ü—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω</h3>
                    <div id="changes-list">
                        <div class="empty-list">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="map-controls">
        <button class="map-control-button" id="add-marker-btn" title="–î–æ–¥–∞—Ç–∏ –º—ñ—Ç–∫—É">
            üìç
            <span class="map-control-tooltip">–î–æ–¥–∞—Ç–∏ –º—ñ—Ç–∫—É</span>
        </button>
        <button class="map-control-button" id="add-polygon-btn" title="–î–æ–¥–∞—Ç–∏ –ø–æ–ª—ñ–≥–æ–Ω">
            ‚¨°
            <span class="map-control-tooltip">–î–æ–¥–∞—Ç–∏ –ø–æ–ª—ñ–≥–æ–Ω</span>
        </button>
        <button class="map-control-button" id="zoom-in-btn" title="–ù–∞–±–ª–∏–∑–∏—Ç–∏">
            ‚ûï
            <span class="map-control-tooltip">–ù–∞–±–ª–∏–∑–∏—Ç–∏</span>
        </button>
        <button class="map-control-button" id="zoom-out-btn" title="–í—ñ–¥–¥–∞–ª–∏—Ç–∏">
            ‚ûñ
            <span class="map-control-tooltip">–í—ñ–¥–¥–∞–ª–∏—Ç–∏</span>
        </button>
    </div>

    <div class="polygon-hints" id="polygon-hints">
        <div class="hints-header">
            <span>‚¨° –†–µ–∂–∏–º –º–∞–ª—é–≤–∞–Ω–Ω—è</span>
            <button class="hints-close" id="close-hints">‚úï</button>
        </div>
        <div class="hints-content">
            <div class="hint-item">
                <span class="hint-key">–ö–ª—ñ–∫</span>
                <span class="hint-desc">–î–æ–¥–∞—Ç–∏ —Ç–æ—á–∫—É</span>
            </div>
            <div class="hint-item">
                <span class="hint-key">Enter</span>
                <span class="hint-desc">–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –º–∞–ª—é–≤–∞–Ω–Ω—è</span>
            </div>
            <div class="hint-item">
                <span class="hint-key">Ctrl + Z</span>
                <span class="hint-desc">–°–∫–∞—Å—É–≤–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—é —Ç–æ—á–∫—É</span>
            </div>
            <div class="hint-item">
                <span class="hint-key">Escape</span>
                <span class="hint-desc">–í–∏–π—Ç–∏ –∑ —Ä–µ–∂–∏–º—É</span>
            </div>
            <div class="hint-item">
                <span class="hint-key">–ü–µ—Ä–µ—Ç—è–≥—É–≤–∞–Ω–Ω—è</span>
                <span class="hint-desc">–ó–º—ñ–Ω–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ—é —Ç–æ—á–∫–∏</span>
            </div>
        </div>
    </div>

    <div id="context-menu" class="context-menu" style="display: none;">
        <div class="context-menu-item" id="context-edit">
            <span>‚úèÔ∏è</span>
            <span>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</span>
        </div>
        <div class="context-menu-item delete" id="context-delete">
            <span>üóëÔ∏è</span>
            <span>–í–∏–¥–∞–ª–∏—Ç–∏</span>
        </div>
    </div>

<div class="polygon-form-overlay" id="polygon-form-overlay">
    <div class="polygon-form">
        <div class="form-header">
            <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–ª—ñ–≥–æ–Ω—É</h2>
            <button class="form-close-btn" id="close-polygon-form">‚úï</button>
        </div>

        <div class="form-group">
            <label>–ù–∞–∑–≤–∞:</label>
            <input type="text" id="polygon-name" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É...">
        </div>

        <div class="form-group">
            <label>–û–ø–∏—Å (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ):</label>
            <textarea id="polygon-description" placeholder="–î–æ–¥–∞–π—Ç–µ –æ–ø–∏—Å..."></textarea>
        </div>

        <div class="form-group">
            <label>–ö–æ–ª—ñ—Ä:</label>
            <div class="color-picker-group">
                <div class="color-option selected" data-color="#2196F3" style="background: #2196F3;"></div>
                <div class="color-option" data-color="#4CAF50" style="background: #4CAF50;"></div>
                <div class="color-option" data-color="#F44336" style="background: #F44336;"></div>
                <div class="color-option" data-color="#FF9800" style="background: #FF9800;"></div>
                <div class="color-option" data-color="#9C27B0" style="background: #9C27B0;"></div>
                <div class="color-option" data-color="#FFEB3B" style="background: #FFEB3B;"></div>
                <div class="color-option" data-color="#00BCD4" style="background: #00BCD4;"></div>
                <div class="color-option" data-color="#E91E63" style="background: #E91E63;"></div>
                <div class="color-option" data-color="#795548" style="background: #795548;"></div>
                <div class="color-option" data-color="#607D8B" style="background: #607D8B;"></div>
                <div class="color-option" data-color="#000000" style="background: #000000;"></div>
                <div class="color-option" data-color="#9E9E9E" style="background: #9E9E9E;"></div>
            </div>
        </div>

        <div class="form-buttons">
            <button class="form-button secondary" id="cancel-polygon-btn">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            <button class="form-button primary" id="save-polygon-btn">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        </div>
    </div>
</div>

<div class="marker-form-overlay" id="marker-form-overlay">
    <div class="marker-form">
        <div class="form-header">
            <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º—ñ—Ç–∫–∏</h2>
            <button class="form-close-btn" id="close-marker-form">‚úï</button>
        </div>

        <div class="form-group">
            <label>–ù–∞–∑–≤–∞:</label>
            <input type="text" id="marker-name" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –ø–æ–¥—ñ—ó...">
        </div>

        <div class="form-group">
            <label>–û–ø–∏—Å (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ):</label>
            <textarea id="marker-description" placeholder="–î–æ–¥–∞–π—Ç–µ –æ–ø–∏—Å –ø–æ–¥—ñ—ó..."></textarea>
        </div>

        <div class="form-group">
            <label>–î–∂–µ—Ä–µ–ª–æ (–ø–æ—Å–∏–ª–∞–Ω–Ω—è):</label>
            <input type="text" id="marker-source" placeholder="https://example.com">
            <div class="form-error" id="source-error">‚ö†Ô∏è –í–≤–µ–¥—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: https://example.com)</div>
        </div>

        <div class="form-group">
            <label>–Ü–∫–æ–Ω–∫–∞:</label>
            <div class="icon-picker-group">
                <div class="icon-option selected" data-icon="üìç">
                    <span class="icon-preview">üìç</span>
                </div>
                <div class="icon-option" data-icon="‚ÑπÔ∏è">
                    <span class="icon-preview">‚ÑπÔ∏è</span>
                </div>
                <div class="icon-option" data-icon="‚ö†Ô∏è">
                    <span class="icon-preview">‚ö†Ô∏è</span>
                </div>
                <div class="icon-option" data-icon="üè†">
                    <span class="icon-preview">üè†</span>
                </div>
                <div class="icon-option" data-icon="üè¢">
                    <span class="icon-preview">üè¢</span>
                </div>
                <div class="icon-option" data-icon="‚≠ê">
                    <span class="icon-preview">‚≠ê</span>
                </div>
                <div class="icon-option" data-icon="‚ù§Ô∏è">
                    <span class="icon-preview">‚ù§Ô∏è</span>
                </div>
                <div class="icon-option" data-icon="üí•">
                    <span class="icon-preview">üí•</span>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>–ö–æ–ª—ñ—Ä —Ñ–æ–Ω—É:</label>
            <div class="color-picker-group">
                <div class="color-option selected" data-color="#2196F3" style="background: #2196F3;"></div>
                <div class="color-option" data-color="#4CAF50" style="background: #4CAF50;"></div>
                <div class="color-option" data-color="#F44336" style="background: #F44336;"></div>
                <div class="color-option" data-color="#FF9800" style="background: #FF9800;"></div>
                <div class="color-option" data-color="#9C27B0" style="background: #9C27B0;"></div>
                <div class="color-option" data-color="#FFEB3B" style="background: #FFEB3B;"></div>
                <div class="color-option" data-color="#00BCD4" style="background: #00BCD4;"></div>
                <div class="color-option" data-color="#E91E63" style="background: #E91E63;"></div>
                <div class="color-option" data-color="#795548" style="background: #795548;"></div>
                <div class="color-option" data-color="#607D8B" style="background: #607D8B;"></div>
                <div class="color-option" data-color="#000000" style="background: #000000;"></div>
                <div class="color-option" data-color="#9E9E9E" style="background: #9E9E9E;"></div>
            </div>
        </div>

        <div class="form-buttons">
            <button class="form-button secondary" id="cancel-marker-btn">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            <button class="form-button primary" id="save-marker-btn">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        </div>
    </div>
</div>
<div class="comment-form-overlay" id="comment-form-overlay">
    <div class="comment-form">
        <div class="form-header">
            <h2>üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç–∏</h2>
            <button class="form-close-btn" id="close-comment-form">‚úï</button>
        </div>

        <div class="form-group">
            <label>–ö–æ–º–µ–Ω—Ç–∞—Ä –¥–æ –∑–º—ñ–Ω (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ):</label>
            <textarea id="save-comment" placeholder="–û–ø–∏—à—ñ—Ç—å —â–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è: –¥–æ–¥–∞–Ω–æ –Ω–æ–≤—ñ –º—ñ—Ç–∫–∏, –æ–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª—ñ–≥–æ–Ω–∏ —Ç–æ—â–æ..." rows="4"></textarea>
        </div>

        <div class="form-buttons">
            <button class="form-button secondary" id="cancel-save-btn">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            <button class="form-button primary" id="confirm-save-btn">–ó–±–µ—Ä–µ–≥—Ç–∏</button>
        </div>
    </div>
</div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
       integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
       crossorigin="">
    </script>
    <script>
    const map = L.map('map', {
        center: [48.6201157, 22.3085117],
        zoom: 13,
        zoomControl: false
    });

    const lightLayer = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '<a href="http://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
    }).addTo(map);

    const darkLayer = L.tileLayer('https://api.maptiler.com/maps/streets-v2-dark/{z}/{x}/{y}.png?key={{ maptiler_api_key }}', {
    maxZoom: 19,
    attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>'
    });

    </script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>